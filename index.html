<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SY News | Rwanda</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        body { font-family: "Georgia", serif; background: #f4f4f4; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border: 1px solid #000; }
        
        h1 { font-size: 4rem; text-align: center; text-transform: uppercase; margin: 0; border-bottom: 8px solid #000; }

        /* Language Switcher Styles */
        .lang-switch { text-align: center; margin: 20px 0; padding: 10px; border-bottom: 2px solid #000; }
        .lang-btn { 
            background: none; border: 1px solid #000; padding: 5px 15px; 
            margin: 0 5px; cursor: pointer; font-weight: bold; text-transform: uppercase;
        }
        .lang-btn.active { background: #000; color: #fff; }

        .article { border-bottom: 1px solid #eee; padding: 20px 0; display: flex; gap: 20px; }
        .article img { width: 250px; height: 150px; object-fit: cover; border: 1px solid #000; }
        .article-body { flex: 1; }
    </style>
</head>
<body>

    <div class="container">
        <h1>SY News</h1>

        <div class="lang-switch">
            <button class="lang-btn active" onclick="loadNews('en', this)">English</button>
            <button class="lang-btn" onclick="loadNews('fr', this)">Fran√ßais</button>
            <button class="lang-btn" onclick="loadNews('rw', this)">Kinyarwanda</button>
        </div>

        <div id="news-feed">Loading news...</div>
    </div>

    <script>
        async function loadNews(lang, btn) {
            // Update Active Button Style
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            if(btn) btn.classList.add('active');

            const feed = document.getElementById('news-feed');
            feed.innerHTML = "Updating news feed...";

            try {
                // We update the API call to ask for the specific language
                const res = await fetch(`/api?lang=${lang}`);
                const articles = await res.json();

                if (articles.length === 0) {
                    feed.innerHTML = "<p>No news found for this language today.</p>";
                    return;
                }

                feed.innerHTML = articles.map(art => `
                    <div class="article">
                        ${art.urlToImage ? `<img src="${art.urlToImage}">` : ''}
                        <div class="article-body">
                            <h2>${art.title}</h2>
                            <p>${art.description || ''}</p>
                            <small>${new Date(art.publishedAt).toLocaleDateString()}</small>
                        </div>
                    </div>
                `).join('');
            } catch (e) {
                feed.innerHTML = "Error loading news.";
            }
        }

        // Load English by default when page opens
        loadNews('en');
    </script>
</body>
</html>
